const language_mapping: Record<string, string> = {
	go: "go",
	kt: "kotlin",
	java: "java",
	js: "javascript",
	mjs: "javascript",
	cjs: "javascript",
	jsx: "javascript",
	ts: "typescript",
	tsx: "typescript",
	c: "c",
	cc: "c++",
	cxx: "c++",
	cpp: "c++",
	"c++": "c++",
	h: "c",
	hh: "c++",
	hxx: "c++",
	hpp: "c++",
	cs: "c#",
	dart: "dart",
	erl: "erlang",
	hrl: "erlang",
	ex: "elixir",
	hs: "haskell",
	html: "html",
	htm: "html",
	css: "css",
	less: "less",
	scss: "scss",
	sass: "sass",
	lua: "lua",
	ml: "ocaml",
	php: "php",
	py: "python",
	ipynb: "python",
	rb: "ruby",
	rs: "rust",
	sh: "shell",
	ps1: "powershell",
	swift: "swift",
	md: "markdown",
	mdx: "markdown",
	markdown: "markdown",
	svelte: "svelte",
	vue: "vue",
	dockerfile: "docker",
	vbs: "vbscript",
	frm: "visualbasic",
	frx: "visualbasic",
	bas: "visualbasic",
	cls: "visualbasic",
	vb: "visualbasic",
	vba: "visualbasic",
	vbp: "visualbasic",
	vbw: "visualbasic",
	prisma: "prisma",
};

const type_mapping: Record<string, RegExp[]> = {
	test: [/.*\.test\..*$/i],
	docs: [/.*\.(md|mdx|markdown)/i],
	ci: [/^\.github\/workflows\/.*\.yml$/i, /^\.circleci\/config\.yml$/i, /^\.gitlab-ci\.yml$/i],
	code: [
		/.*\.(go|kt|java|js|mjs|cjs|jsx|ts|tsx|c|cc|cxx|cpp|c\+\+|h|hh|hxx|hpp|cs|dart|erl|hrl|ex|hs|html|htm|css|less|scss|sass|lua|ml|vbs|php|py|ipynb|rb|rs|sh|ps1|bat|cmd|prisma|swift|md|mdx|svelte|vue|dockerfile|frm|frx|bas|cls|vb|vba|vbp|vbw)$/i,
	],
	undefined: [
		/\.git.*$/i,
		/\..*?ignore$/i,
		/\..*?rc$/i,
		/\.mca$/i,
		/\.(lock|json|toml|yaml|yml|map)$/i,
		/\.(png|jpg|jpeg|gif|svg|ico|webp)$/i,
		/\.(eot|ttf|woff|woff2|otf)$/i,
		/\.(mp3|m4a|mp4|webm|ogg|wav|midi|m3u8|mov)$/i,
		/\.(exe|bin|o|a|out|so|dll|lib|obj|jar|dat)$/i,
		/\.(zip|tar|rar|gz|7z|bz2|iso|dmg|npy|下載)$/i,
		/\.(txt|srt|vtt|log|csv|tsv|xml|pdf|doc|docx|xls|xlsx|ppt|pptx)#?$/i,
		/\.env.example$/i,
		/\.(DS_Store|clang-format|nojekyll|cargo-ok|replit)$/i,
		/^(.+\/)?[^/.]+$/,
	],
};

export const uncovereds = new Set<string>();

export function language(file: string): string {
	const ext = file.split("/").reverse()[0].split(".").pop()?.toLowerCase() || "";
	const lang = language_mapping[ext] || "unknown";

	return lang;
}

export function filetype(file: string): string | undefined {
	for (const [type, regexes] of Object.entries(type_mapping)) {
		for (const regex of regexes) {
			if (regex.test(file)) {
				if (type === "undefined") {
					return undefined;
				}
				return type;
			}
		}
	}

	uncovereds.add(file);
	return "unknown";
}

export const language_color: Record<string, string> = {
	"1c_enterprise": "#814CCC",
	"2-dimensional_array": "#38761D",
	"4d": "#004289",
	abap: "#E8274B",
	abap_cds: "#555e25",
	actionscript: "#882B0F",
	ada: "#02f88c",
	adblock_filter_list: "#800000",
	adobe_font_metrics: "#fa0f00",
	agda: "#315665",
	ags_script: "#B9D9FF",
	aidl: "#34EB6B",
	al: "#3AA2B5",
	alloy: "#64C800",
	alpine_abuild: "#0D597F",
	altium_designer: "#A89663",
	ampl: "#E6EFBB",
	angelscript: "#C7D7DC",
	ant_build_system: "#A9157E",
	antlers: "#ff269e",
	antlr: "#9DC3FF",
	apacheconf: "#d12127",
	apex: "#1797c0",
	api_blueprint: "#2ACCA8",
	apl: "#5A8164",
	apollo_guidance_computer: "#0B3D91",
	applescript: "#101F1F",
	arc: "#aa2afe",
	asciidoc: "#73a0c5",
	"asp.net": "#9400ff",
	aspectj: "#a957b0",
	assembly: "#6E4C13",
	astro: "#ff5a03",
	asymptote: "#ff0000",
	ats: "#1ac620",
	augeas: "#9CC134",
	autohotkey: "#6594b9",
	autoit: "#1C3552",
	avro_idl: "#0040FF",
	awk: "#c30e9b",
	ballerina: "#FF5000",
	basic: "#ff0000",
	batchfile: "#C1F12E",
	beef: "#a52f4e",
	berry: "#15A13C",
	bibtex: "#778899",
	bicep: "#519aba",
	bikeshed: "#5562ac",
	bison: "#6A463F",
	bitbake: "#00bce4",
	blade: "#f7523f",
	blitzbasic: "#00FFAE",
	blitzmax: "#cd6400",
	bluespec: "#12223c",
	boo: "#d4bec1",
	boogie: "#c80fa0",
	brainfuck: "#2F2530",
	brighterscript: "#66AABB",
	brightscript: "#662D91",
	browserslist: "#ffd539",
	c: "#555555",
	"c#": "#178600",
	"c++": "#f34b7d",
	cabal_config: "#483465",
	cadence: "#00ef8b",
	cairo: "#ff4a48",
	cameligo: "#3be133",
	cap_cds: "#0092d1",
	"cap'n_proto": "#c42727",
	ceylon: "#dfa535",
	chapel: "#8dc63f",
	chuck: "#3f8000",
	cirru: "#ccccff",
	clarion: "#db901e",
	clarity: "#5546ff",
	classic_asp: "#6a40fd",
	clean: "#3F85AF",
	click: "#E4E6F3",
	clips: "#00A300",
	clojure: "#db5855",
	closure_templates: "#0d948f",
	cloud_firestore_security_rules: "#FFA000",
	cmake: "#DA3434",
	codeql: "#140f46",
	coffeescript: "#244776",
	coldfusion: "#ed2cd6",
	coldfusion_cfc: "#ed2cd6",
	collada: "#F1A42B",
	common_lisp: "#3fb68b",
	common_workflow_language: "#B5314C",
	component_pascal: "#B0CE4E",
	coq: "#d0b68c",
	crystal: "#000100",
	cson: "#244776",
	csound: "#1a1a1a",
	csound_document: "#1a1a1a",
	csound_score: "#1a1a1a",
	css: "#563d7c",
	csv: "#237346",
	cuda: "#3A4E3A",
	cue: "#5886E1",
	curry: "#531242",
	cweb: "#00007a",
	cypher: "#34c0eb",
	cython: "#fedf5b",
	d: "#ba595e",
	dafny: "#FFEC25",
	darcs_patch: "#8eff23",
	dart: "#00B4AB",
	dataweave: "#003a52",
	debian_package_control_file: "#D70751",
	denizenscript: "#FBEE96",
	dhall: "#dfafff",
	directx_3d_file: "#aace60",
	dm: "#447265",
	dockerfile: "#384d54",
	dogescript: "#cca760",
	dylan: "#6c616e",
	e: "#ccce35",
	earthly: "#2af0ff",
	easybuild: "#069406",
	ec: "#913960",
	ecere_projects: "#913960",
	ecl: "#8a1267",
	eclipse: "#001d9d",
	ecmarkup: "#eb8131",
	editorconfig: "#fff1f2",
	eiffel: "#4d6977",
	ejs: "#a91e50",
	elixir: "#6e4a7e",
	elm: "#60B5CC",
	elvish: "#55BB55",
	emacs_lisp: "#c065db",
	emberscript: "#FFF4F3",
	eq: "#a78649",
	erlang: "#B83998",
	euphoria: "#FF790B",
	"f#": "#b845fc",
	"f*": "#572e30",
	factor: "#636746",
	fancy: "#7b9db4",
	fantom: "#14253c",
	faust: "#c37240",
	fennel: "#fff3d7",
	figlet_font: "#FFDDBB",
	filebench_wml: "#F6B900",
	fish: "#4aae47",
	fluent: "#ffcc33",
	flux: "#88ccff",
	forth: "#341708",
	fortran: "#4d41b1",
	fortran_free_form: "#4d41b1",
	freebasic: "#867db1",
	freemarker: "#0050b2",
	frege: "#00cafe",
	futhark: "#5f021f",
	"g-code": "#D08CF2",
	game_maker_language: "#71b417",
	gaml: "#FFC766",
	gams: "#f49a22",
	gap: "#0000cc",
	gcc_machine_description: "#FFCFAB",
	gdscript: "#355570",
	gedcom: "#003058",
	"gemfile.lock": "#701516",
	gemini: "#ff6900",
	genero: "#63408e",
	genero_forms: "#d8df39",
	genie: "#fb855d",
	genshi: "#951531",
	gentoo_ebuild: "#9400ff",
	gentoo_eclass: "#9400ff",
	gerber_image: "#d20b00",
	gherkin: "#5B2063",
	git_attributes: "#F44D27",
	git_config: "#F44D27",
	git_revision_list: "#F44D27",
	gleam: "#ffaff3",
	glsl: "#5686a5",
	glyph: "#c1ac7f",
	gnuplot: "#f0a9f0",
	go: "#00ADD8",
	go_checksums: "#00ADD8",
	go_module: "#00ADD8",
	golo: "#88562A",
	gosu: "#82937f",
	grace: "#615f8b",
	gradle: "#02303a",
	grammatical_framework: "#ff0000",
	graphql: "#e10098",
	"graphviz_(dot)": "#2596be",
	groovy: "#4298b8",
	groovy_server_pages: "#4298b8",
	gsc: "#FF6800",
	hack: "#878787",
	haml: "#ece2a9",
	handlebars: "#f7931e",
	haproxy: "#106da9",
	harbour: "#0e60e3",
	haskell: "#5e5086",
	haxe: "#df7900",
	hiveql: "#dce200",
	hlsl: "#aace60",
	hocon: "#9ff8ee",
	holyc: "#ffefaf",
	hoon: "#00b171",
	html: "#e34c26",
	"html+ecr": "#2e1052",
	"html+eex": "#6e4a7e",
	"html+erb": "#701516",
	"html+php": "#4f5d95",
	"html+razor": "#512be4",
	http: "#005C9C",
	hxml: "#f68712",
	hy: "#7790B2",
	idl: "#a3522f",
	idris: "#b30000",
	ignore_list: "#000000",
	igor_pro: "#0000cc",
	imagej_macro: "#99AAFF",
	imba: "#16cec6",
	ini: "#d1dbe0",
	inno_setup: "#264b99",
	io: "#a9188d",
	ioke: "#078193",
	isabelle: "#FEFE00",
	isabelle_root: "#FEFE00",
	j: "#9EEDFF",
	janet: "#0886a5",
	jar_manifest: "#b07219",
	jasmin: "#d03600",
	java: "#b07219",
	java_properties: "#2A6277",
	java_server_pages: "#2A6277",
	javascript: "#f1e05a",
	"javascript+erb": "#f1e05a",
	jest_snapshot: "#15c213",
	jetbrains_mps: "#21D789",
	jflex: "#DBCA00",
	jinja: "#a52a22",
	jison: "#56b3cb",
	jison_lex: "#56b3cb",
	jolie: "#843179",
	jq: "#c7254e",
	json: "#292929",
	json_with_comments: "#292929",
	json5: "#267CB9",
	jsoniq: "#40d47e",
	jsonld: "#0c479c",
	jsonnet: "#0064bd",
	julia: "#a270ba",
	jupyter_notebook: "#DA5B0B",
	just: "#384d54",
	kaitai_struct: "#773b37",
	kakounescript: "#6f8042",
	kicad_layout: "#2f4aab",
	kicad_legacy_layout: "#2f4aab",
	kicad_schematic: "#2f4aab",
	kotlin: "#A97BFF",
	krl: "#28430A",
	kvlang: "#1da6e0",
	labview: "#fede06",
	lark: "#2980B9",
	lasso: "#999999",
	latte: "#f2a542",
	less: "#1d365d",
	lex: "#DBCA00",
	lfe: "#4C3023",
	ligolang: "#0e74ff",
	lilypond: "#9ccc7c",
	liquid: "#67b8de",
	literate_agda: "#315665",
	literate_coffeescript: "#244776",
	literate_haskell: "#5e5086",
	livescript: "#499886",
	llvm: "#185619",
	logtalk: "#295b9a",
	lolcode: "#cc9900",
	lookml: "#652B81",
	lsl: "#3d9970",
	lua: "#000080",
	macaulay2: "#d8ffff",
	makefile: "#427819",
	mako: "#7e858d",
	markdown: "#083fa1",
	marko: "#42bff2",
	mask: "#f97732",
	mathematica: "#dd1100",
	matlab: "#e16737",
	max: "#c4a79c",
	maxscript: "#00a6a6",
	mcfunction: "#E22837",
	mercury: "#ff2b2b",
	mermaid: "#ff3670",
	meson: "#007800",
	metal: "#8f14e9",
	miniyaml: "#ff1111",
	mint: "#02b046",
	mirah: "#c7a938",
	mirc_script: "#3d57c3",
	mlir: "#5EC8DB",
	modelica: "#de1d31",
	"modula-2": "#10253f",
	"modula-3": "#223388",
	monkey_c: "#8D6747",
	moonscript: "#ff4585",
	motoko: "#fbb03b",
	motorola_68k_assembly: "#005daa",
	move: "#4a137a",
	mql4: "#62A8D6",
	mql5: "#4A76B8",
	mtml: "#b7e1f4",
	mupad: "#244963",
	mustache: "#724b3b",
	nanorc: "#2d004d",
	nasal: "#1d2c4e",
	ncl: "#28431f",
	nearley: "#990000",
	nemerle: "#3d3c6e",
	nesc: "#94B0C7",
	netlinx: "#0aa0ff",
	"netlinx+erb": "#747faa",
	netlogo: "#ff6375",
	newlisp: "#87AED7",
	nextflow: "#3ac486",
	nginx: "#009639",
	nim: "#ffc200",
	nit: "#009917",
	nix: "#7e7eff",
	npm_config: "#cb3837",
	nu: "#c9df40",
	numpy: "#9C8AF9",
	nunjucks: "#3d8137",
	nwscript: "#111522",
	"oasv2-json": "#85ea2d",
	"oasv2-yaml": "#85ea2d",
	"oasv3-json": "#85ea2d",
	"oasv3-yaml": "#85ea2d",
	"objective-c": "#438eff",
	"objective-c++": "#6866fb",
	"objective-j": "#ff0c5a",
	objectscript: "#424893",
	ocaml: "#3be133",
	odin: "#60AFFE",
	omgrofl: "#cabbff",
	ooc: "#b0b77e",
	opal: "#f7ede0",
	open_policy_agent: "#7d9199",
	openapi_specification_v2: "#85ea2d",
	openapi_specification_v3: "#85ea2d",
	opencl: "#ed2e2d",
	openedge_abl: "#5ce600",
	openqasm: "#AA70FF",
	openscad: "#e5cd45",
	option_list: "#476732",
	org: "#77aa99",
	oxygene: "#cdd0e3",
	oz: "#fab738",
	p4: "#7055b5",
	pan: "#cc0000",
	papyrus: "#6600cc",
	parrot: "#f3ca0a",
	pascal: "#E3F171",
	pawn: "#dbb284",
	pddl: "#0d00ff",
	"peg.js": "#234d6b",
	pep8: "#C76F5B",
	perl: "#0298c3",
	php: "#4F5D95",
	picolisp: "#6067af",
	piglatin: "#fcd7de",
	pike: "#005390",
	plpgsql: "#336790",
	plsql: "#dad8d8",
	pogoscript: "#d80074",
	polar: "#ae81ff",
	portugol: "#f8bd00",
	postcss: "#dc3a0c",
	postscript: "#da291c",
	"pov-ray_sdl": "#6bac65",
	powerbuilder: "#8f0f8d",
	powershell: "#012456",
	prisma: "#0c344b",
	processing: "#0096D8",
	procfile: "#3B2F63",
	prolog: "#74283c",
	promela: "#de0000",
	propeller_spin: "#7fa2a7",
	pug: "#a86454",
	puppet: "#302B6D",
	purebasic: "#5a6986",
	purescript: "#1D222D",
	python: "#3572A5",
	python_console: "#3572A5",
	python_traceback: "#3572A5",
	q: "#0040cd",
	"q#": "#fed659",
	qml: "#44a51c",
	qt_script: "#00b841",
	quake: "#882233",
	r: "#198CE7",
	racket: "#3c5caa",
	ragel: "#9d5200",
	raku: "#0000fb",
	raml: "#77d9fb",
	rascal: "#fffaa0",
	rdoc: "#701516",
	reason: "#ff5847",
	reasonligo: "#ff5847",
	rebol: "#358a5b",
	record_jar: "#0673ba",
	red: "#f50000",
	regular_expression: "#009a00",
	"ren'py": "#ff7f7f",
	rescript: "#ed5051",
	restructuredtext: "#141414",
	rexx: "#d90e09",
	ring: "#2D54CB",
	riot: "#A71E49",
	rmarkdown: "#198ce7",
	robotframework: "#00c0b5",
	roff: "#ecdebe",
	roff_manpage: "#ecdebe",
	rouge: "#cc0088",
	routeros_script: "#DE3941",
	rpgle: "#2BDE21",
	ruby: "#701516",
	runoff: "#665a4e",
	rust: "#dea584",
	saltstack: "#646464",
	sas: "#B34936",
	sass: "#a53b70",
	scala: "#c22d40",
	scaml: "#bd181a",
	scenic: "#fdc700",
	scheme: "#1e4aec",
	scilab: "#ca0f21",
	scss: "#c6538c",
	sed: "#64b970",
	self: "#0579aa",
	shaderlab: "#222c37",
	shell: "#89e051",
	shellcheck_config: "#cecfcb",
	shen: "#120F14",
	simple_file_verification: "#C9BFED",
	singularity: "#64E6AD",
	slash: "#007eff",
	slice: "#003fa2",
	slim: "#2b2b2b",
	smalltalk: "#596706",
	smarty: "#f0c040",
	smithy: "#c44536",
	smpl: "#c94949",
	solidity: "#AA6746",
	sourcepawn: "#f69e1d",
	sparql: "#0C4597",
	sqf: "#3F3F3F",
	sql: "#e38c00",
	sqlpl: "#e38c00",
	squirrel: "#800000",
	srecode_template: "#348a34",
	stan: "#b2011d",
	standard_ml: "#dc566d",
	starlark: "#76d275",
	stata: "#1a5f91",
	stl: "#373b5e",
	stringtemplate: "#3fb34f",
	stylus: "#ff6347",
	subrip_text: "#9e0101",
	sugarss: "#2fcc9f",
	supercollider: "#46390b",
	svelte: "#ff3e00",
	svg: "#ff9900",
	swift: "#F05138",
	systemverilog: "#DAE1C2",
	talon: "#333333",
	tcl: "#e4cc98",
	terra: "#00004c",
	tex: "#3D6117",
	textile: "#ffe7ac",
	textmate_properties: "#df66e4",
	thrift: "#D12127",
	ti_program: "#A0AA87",
	tla: "#4b0079",
	toml: "#9c4221",
	tsql: "#e38c00",
	tsv: "#237346",
	tsx: "#3178c6",
	turing: "#cf142b",
	twig: "#c1d026",
	txl: "#0178b8",
	typescript: "#3178c6",
	unified_parallel_c: "#4e3617",
	unity3d_asset: "#222c37",
	uno: "#9933cc",
	unrealscript: "#a54c4d",
	urweb: "#ccccee",
	v: "#4f87c4",
	vala: "#a56de2",
	valve_data_format: "#f26025",
	vba: "#867db1",
	vbscript: "#15dcdc",
	vcl: "#148AA8",
	velocity_template_language: "#507cff",
	verilog: "#b2b7f8",
	vhdl: "#adb2cb",
	vim_help_file: "#199f4b",
	vim_script: "#199f4b",
	vim_snippet: "#199f4b",
	"visual_basic_.net": "#945db7",
	"visual_basic_6.0": "#2c6353",
	volt: "#1F1F1F",
	vue: "#41b883",
	vyper: "#2980b9",
	wdl: "#42f1f4",
	web_ontology_language: "#5b70bd",
	webassembly: "#04133b",
	whiley: "#d5c397",
	wikitext: "#fc5757",
	windows_registry_entries: "#52d5ff",
	wisp: "#7582D1",
	witcher_script: "#ff0000",
	wollok: "#a23738",
	world_of_warcraft_addon_data: "#f7e43f",
	wren: "#383838",
	x10: "#4B6BEF",
	xbase: "#403a40",
	xc: "#99DA07",
	xml: "#0060ac",
	xml_property_list: "#0060ac",
	xojo: "#81bd41",
	xonsh: "#285EEF",
	xquery: "#5232e7",
	xslt: "#EB8CEB",
	xtend: "#24255d",
	yacc: "#4B6C4B",
	yaml: "#cb171e",
	yara: "#220000",
	yasnippet: "#32AB90",
	yul: "#794932",
	zap: "#0d665e",
	zenscript: "#00BCD1",
	zephir: "#118f9e",
	zig: "#ec915c",
	zil: "#dc75e5",
	zimpl: "#d67711",
};
